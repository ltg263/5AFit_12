package com.jxkj.fit_5a.conpoment.utils;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.PathMeasure;
import android.graphics.PointF;
import android.graphics.RectF;
import android.graphics.drawable.BitmapDrawable;
import android.util.DisplayMetrics;
import android.util.Log;
import android.view.WindowManager;

import com.jxkj.fit_5a.R;
import com.jxkj.fit_5a.app.MainApplication;
import com.jxkj.fit_5a.base.BaseActivity;

import java.util.List;


/**
 * Created by AuthorName on Mar 23, 2021.
 * Copyright  2021 CompanyName. All rights reserved.
 * <p>
 * Generated by PaintCode
 * http://www.paintcodeapp.com
 *
 * @author AuthorName
 */
public class StyleKitName {


    public static PathMeasure mPathMeasure;
    public static float[] mCurrentPosition;

    // Resizing Behavior
    public enum ResizingBehavior {
        AspectFit, //!< The content is proportionally resized to fit into the target rectangle.
        AspectFill, //!< The content is proportionally resized to completely fill the target rectangle.
        Stretch, //!< The content is stretched to match the entire target rectangle.
        Center, //!< The content is centered in the target rectangle, but it is NOT resized.
    }

    // Canvas Drawings
    // Tab


    //900*600

    private static class CacheFor_1100900Canvas {
        private static Paint paint = new Paint();
        private static Path _2Path = new Path();
    }

    public static void draw_1100900Canvas(Canvas canvas, List<List<Double>> info) {
        StyleKitName.draw_1100900Canvas(canvas, info, new RectF(150f, 120f, 2500f, 1800f), ResizingBehavior.AspectFill);
    }

    public static void draw_1100900Canvas(Canvas canvas, List<List<Double>> info, RectF targetFrame, ResizingBehavior resizing) {
        Log.w("--->>>>>", "屏幕宽:" + canvas.getWidth());//1920
        Log.w("--->>>>>", "屏幕高:" + canvas.getHeight());//1080

        Log.w("--->>>>>", "矩形范围宽:" + canvas.getHeight()*3/2);//1920
        Log.w("--->>>>>", "矩形范围高:" + canvas.getHeight());//1080

        Log.w("--->>>>>", "矩形居中X起止:" + (canvas.getWidth()-canvas.getHeight()*3/2)/2);//1080
        Log.w("--->>>>>", "矩形居中X终止:" + ((canvas.getWidth()-canvas.getHeight()*3/2)/2+canvas.getHeight()*3/2));//1080
        Paint paint = CacheFor_1100900Canvas.paint;

        //屏幕宽:(1920-1620)/2
        //矩形范围宽:1620
        //
        RectF resizedFrame = new RectF((canvas.getWidth()-canvas.getHeight()*3/2)/2, 0f, (canvas.getWidth()-canvas.getHeight()*3/2)/2+canvas.getHeight()*3/2,  canvas.getHeight());
//        RectF mRectF = new RectF(0, 0f, canvas.getHeight()*3/2,  canvas.getHeight());
//        RectF resizedFrame = CacheFor_1100900Canvas.originalFrame;

//        StyleKitName.resizingBehaviorApply(resizing, CacheFor_1100900Canvas.originalFrame, targetFrame, resizedFrame);
//        RectF resizedFrame = resizingBehaviorApply(resizing, mRectF, new RectF(0f, 0f, 1200f, 900f));

        canvas.translate(resizedFrame.left, resizedFrame.top);
//        canvas.scale(0, 0);


        Path _2Path = CacheFor_1100900Canvas._2Path;
        _2Path.reset();
//        double hieghtBl = 1000/(canvas.getWidth()/2);
        double hieghtBl = 1;

        _2Path.moveTo((float) (info.get(0).get(0)/hieghtBl), (float) (info.get(0).get(1)/hieghtBl));
        for (int i = 0; i < info.size(); i++) {
            _2Path.lineTo((float) (info.get(i).get(0)/hieghtBl), (float) (info.get(i).get(1)/hieghtBl));
        }
        _2Path.close();
        paint.reset();
        paint.setFlags(Paint.ANTI_ALIAS_FLAG);
        paint.setStrokeWidth(5f);
        canvas.save();
        paint.setStyle(Paint.Style.STROKE);
        paint.setColor(MainApplication.getContext().getResources().getColor(R.color.color_text_theme));
        canvas.drawPath(_2Path, paint);
        if (mCurrentPosition == null) {
            mCurrentPosition = new float[2];
            mCurrentPosition[0] = (float) (info.get(0).get(0)/hieghtBl);
            mCurrentPosition[1] = (float) (info.get(0).get(1)/hieghtBl);
        }

        Bitmap bitmap = ((BitmapDrawable) MainApplication.getContext().getResources().getDrawable(R.drawable.ic_d_red)).getBitmap();
        bitmap = StringUtil.zoomImage(bitmap, 30, 50);
        canvas.drawBitmap(bitmap, mCurrentPosition[0] - 15, mCurrentPosition[1] - 50, paint);

        if (mPathMeasure == null) {
            mPathMeasure = new PathMeasure(_2Path, true);
        }

        canvas.restore();
    }


    public static RectF resizingBehaviorApply(ResizingBehavior behavior, RectF rect, RectF target) {
        if (rect.equals(target) || target == null) {
            return rect;
        }

        if (behavior == ResizingBehavior.Stretch) {
            return target;
        }

        PointF ratio = new PointF();
        ratio.x = Math.abs(target.width() / rect.width());
        ratio.y = Math.abs(target.height() / rect.height());

        float scale = 0f;

        switch (behavior) {
            case AspectFit: {
                scale = Math.min(ratio.x, ratio.y);
                break;
            }
            case AspectFill: {
                scale = Math.max(ratio.x, ratio.y);
                break;
            }
            case Center: {
                scale = 1f;
                break;
            }
        }

        PointF newSize = new PointF(Math.abs(rect.width() * scale), Math.abs(rect.height() * scale));
        RectF result = new RectF(target.centerX(), target.centerY(), target.centerX(), target.centerY());
        result.inset(-newSize.x / 2f, -newSize.y / 2f);
        return result;
    }
}